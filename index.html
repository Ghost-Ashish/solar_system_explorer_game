<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solar System Explorer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;family=Exo+2:wght@300;400;600&amp;display=swap" rel="stylesheet">
  <style>
    body { box-sizing: border-box; }
    
    * { font-family: 'Exo 2', sans-serif; }
    .title-font { font-family: 'Orbitron', monospace; }
    
    .space-bg {
      background: radial-gradient(ellipse at center, #0a0a1a 0%, #000005 70%);
    }
    
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--duration) ease-in-out infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: var(--min-opacity); transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    
    @keyframes orbit {
      from { transform: rotate(0deg) translateX(var(--orbit-radius)) rotate(0deg); }
      to { transform: rotate(360deg) translateX(var(--orbit-radius)) rotate(-360deg); }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px var(--glow-color), 0 0 40px var(--glow-color); }
      50% { box-shadow: 0 0 30px var(--glow-color), 0 0 60px var(--glow-color), 0 0 80px var(--glow-color); }
    }
    
    .celestial-body {
      position: absolute;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.3s ease, filter 0.3s ease;
    }
    
    .celestial-body:hover {
      transform: scale(1.15);
      filter: brightness(1.3);
    }
    
    .sun {
      background: radial-gradient(circle at 30% 30%, #fff7e6, #ffd700, #ff8c00, #ff4500);
      --glow-color: rgba(255, 165, 0, 0.6);
      animation: pulse-glow 3s ease-in-out infinite;
    }
    
    .earth {
      background: radial-gradient(circle at 30% 30%, #87ceeb, #4169e1, #1e3a5f, #0a1628);
      box-shadow: inset -8px -8px 20px rgba(0,0,0,0.5), 0 0 15px rgba(100, 149, 237, 0.4);
    }
    
    .earth::before {
      content: '';
      position: absolute;
      top: 15%; left: 20%;
      width: 30%; height: 25%;
      background: rgba(34, 139, 34, 0.7);
      border-radius: 40%;
      transform: rotate(-15deg);
    }
    
    .earth::after {
      content: '';
      position: absolute;
      top: 45%; left: 50%;
      width: 25%; height: 20%;
      background: rgba(34, 139, 34, 0.6);
      border-radius: 30%;
    }
    
    .moon {
      background: radial-gradient(circle at 30% 30%, #f5f5f5, #c0c0c0, #808080, #4a4a4a);
      box-shadow: inset -4px -4px 10px rgba(0,0,0,0.6);
    }
    
    .moon::before, .moon::after {
      content: '';
      position: absolute;
      background: rgba(80, 80, 80, 0.4);
      border-radius: 50%;
    }
    
    .moon::before { top: 20%; left: 30%; width: 20%; height: 20%; }
    .moon::after { top: 50%; left: 55%; width: 15%; height: 15%; }
    
    .mars {
      background: radial-gradient(circle at 30% 30%, #ffb366, #cd5c5c, #8b0000, #4a0000);
      box-shadow: inset -6px -6px 15px rgba(0,0,0,0.5), 0 0 12px rgba(205, 92, 92, 0.3);
    }
    
    .mars::before {
      content: '';
      position: absolute;
      top: 10%; left: 25%;
      width: 50%; height: 8%;
      background: rgba(139, 69, 19, 0.5);
      border-radius: 50%;
    }
    
    .orbit-path {
      position: absolute;
      border: 1px dashed rgba(255, 255, 255, 0.15);
      border-radius: 50%;
      pointer-events: none;
    }
    
    .info-card {
      background: linear-gradient(135deg, rgba(10, 10, 30, 0.95), rgba(20, 20, 50, 0.9));
      border: 1px solid rgba(100, 149, 237, 0.3);
      backdrop-filter: blur(10px);
    }
    
    .data-value {
      color: #00ffff;
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    }
    
    .control-btn {
      background: linear-gradient(135deg, rgba(30, 30, 60, 0.9), rgba(20, 20, 40, 0.9));
      border: 1px solid rgba(100, 149, 237, 0.4);
      transition: all 0.3s ease;
    }
    
    .control-btn:hover {
      background: linear-gradient(135deg, rgba(50, 50, 100, 0.9), rgba(30, 30, 70, 0.9));
      border-color: rgba(100, 149, 237, 0.8);
      transform: scale(1.05);
    }
    
    .control-btn.active {
      background: linear-gradient(135deg, rgba(100, 149, 237, 0.4), rgba(70, 100, 180, 0.4));
      border-color: #6495ed;
    }
    
    .speed-slider {
      -webkit-appearance: none;
      background: linear-gradient(90deg, #1e3a5f, #6495ed);
      border-radius: 10px;
      height: 6px;
    }
    
    .speed-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      background: radial-gradient(circle, #00ffff, #0088ff);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
    }
    
    .educational-panel {
      background: linear-gradient(180deg, rgba(10, 10, 30, 0.98), rgba(5, 5, 20, 0.95));
      border-left: 3px solid #6495ed;
    }
    
    .fact-highlight {
      background: linear-gradient(90deg, rgba(100, 149, 237, 0.2), transparent);
      border-left: 2px solid #00ffff;
    }
    
    .distance-line {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, rgba(0, 255, 255, 0.8), rgba(0, 255, 255, 0.2));
      transform-origin: left center;
      pointer-events: none;
    }
    
    .mini-map {
      background: radial-gradient(circle, rgba(10, 10, 30, 0.9), rgba(0, 0, 10, 0.95));
      border: 1px solid rgba(100, 149, 237, 0.3);
    }
    
    .zoom-indicator {
      position: absolute;
      border: 1px solid rgba(0, 255, 255, 0.5);
      background: rgba(0, 255, 255, 0.1);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full m-0 p-0 overflow-hidden space-bg">
  <div id="app" class="w-full h-full relative"><!-- Stars Background -->
   <div id="stars-container" class="absolute inset-0 overflow-hidden"></div><!-- Main Title -->
   <div class="absolute top-4 left-1/2 -translate-x-1/2 z-20 text-center">
    <h1 id="main-title" class="title-font text-3xl md:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-500 tracking-wider">SOLAR SYSTEM EXPLORER</h1>
    <p id="welcome-message" class="text-blue-300 text-sm mt-1 opacity-80">Navigate through our cosmic neighborhood</p>
   </div><!-- Solar System Container -->
   <div id="solar-system" class="absolute inset-0 flex items-center justify-center" style="transform-origin: center center;"><!-- Orbit Paths -->
    <div class="orbit-path" style="width: 240px; height: 240px; margin-left: -120px; margin-top: -120px;"></div>
    <div class="orbit-path" style="width: 400px; height: 400px; margin-left: -200px; margin-top: -200px;"></div><!-- Sun -->
    <div class="celestial-body sun" data-body="sun" style="width: 80px; height: 80px; left: calc(50% - 40px); top: calc(50% - 40px);"></div><!-- Earth Orbit Container -->
    <div id="earth-orbit" class="absolute" style="width: 0; height: 0; left: 50%; top: 50%; --orbit-radius: 120px; animation: orbit 20s linear infinite;">
     <div class="celestial-body earth" data-body="earth" style="width: 36px; height: 36px; left: calc(var(--orbit-radius) - 18px); top: -18px; animation: spin 10s linear infinite reverse;"></div><!-- Moon orbiting Earth -->
     <div id="moon-orbit" style="position: absolute; left: calc(var(--orbit-radius)); top: 0; --moon-radius: 50px; animation: orbit 5s linear infinite;">
      <div class="celestial-body moon" data-body="moon" style="width: 12px; height: 12px; left: calc(var(--moon-radius) - 6px); top: -6px;"></div>
     </div>
    </div><!-- Mars Orbit Container -->
    <div id="mars-orbit" class="absolute" style="width: 0; height: 0; left: 50%; top: 50%; --orbit-radius: 200px; animation: orbit 35s linear infinite;">
     <div class="celestial-body mars" data-body="mars" style="width: 28px; height: 28px; left: calc(var(--orbit-radius) - 14px); top: -14px; animation: spin 12s linear infinite reverse;"></div>
    </div><!-- Distance Lines (shown when measuring) -->
    <div id="distance-lines" class="hidden"></div>
   </div><!-- Control Panel -->
   <div class="absolute bottom-4 left-4 z-20 space-y-3">
    <div class="info-card rounded-xl p-4 w-64">
     <h3 class="title-font text-cyan-400 text-sm font-bold mb-3 flex items-center gap-2"><span>‚öôÔ∏è</span> CONTROLS</h3>
     <div class="space-y-3">
      <div><label class="text-gray-400 text-xs block mb-1">Time Speed</label>
       <div class="flex items-center gap-2"><span class="text-cyan-400 text-xs">0.1x</span> <input type="range" id="speed-slider" class="speed-slider flex-1" min="0.1" max="5" step="0.1" value="1"> <span class="text-cyan-400 text-xs">5x</span>
       </div>
       <div class="text-center text-cyan-300 text-xs mt-1">
        Current: <span id="speed-display">1.0x</span>
       </div>
      </div>
      <div class="flex gap-2"><button id="pause-btn" class="control-btn rounded-lg px-3 py-2 text-white text-xs flex-1"> ‚è∏Ô∏è Pause </button> <button id="reset-btn" class="control-btn rounded-lg px-3 py-2 text-white text-xs flex-1"> üîÑ Reset </button>
      </div>
      <div class="flex gap-2"><button id="measure-btn" class="control-btn rounded-lg px-3 py-2 text-white text-xs flex-1"> üìè Measure </button> <button id="orbits-btn" class="control-btn rounded-lg px-3 py-2 text-white text-xs flex-1 active"> üîµ Orbits </button>
      </div>
     </div>
    </div><!-- Zoom Controls -->
    <div class="info-card rounded-xl p-3 w-64">
     <div class="flex items-center justify-between"><span class="text-gray-400 text-xs">Zoom</span>
      <div class="flex gap-2"><button id="zoom-out" class="control-btn rounded-lg w-8 h-8 text-white text-lg">‚àí</button> <span id="zoom-level" class="text-cyan-400 text-sm self-center w-12 text-center">100%</span> <button id="zoom-in" class="control-btn rounded-lg w-8 h-8 text-white text-lg">+</button>
      </div>
     </div>
    </div>
   </div><!-- Celestial Body Info Card -->
   <div id="body-info" class="absolute top-20 right-4 z-20 info-card rounded-xl p-5 w-72 hidden"><button id="close-info" class="absolute top-2 right-2 text-gray-500 hover:text-white text-lg">‚úï</button>
    <div class="flex items-center gap-3 mb-4">
     <div id="info-icon" class="w-12 h-12 rounded-full"></div>
     <div>
      <h2 id="info-name" class="title-font text-xl font-bold text-white"></h2>
      <p id="info-type" class="text-blue-400 text-xs"></p>
     </div>
    </div>
    <div class="space-y-3 text-sm">
     <div class="flex justify-between"><span class="text-gray-400">Diameter</span> <span id="info-diameter" class="data-value font-semibold"></span>
     </div>
     <div class="flex justify-between"><span class="text-gray-400">Distance from Sun</span> <span id="info-distance" class="data-value font-semibold"></span>
     </div>
     <div class="flex justify-between"><span class="text-gray-400">Orbital Period</span> <span id="info-period" class="data-value font-semibold"></span>
     </div>
     <div class="flex justify-between"><span class="text-gray-400">Temperature</span> <span id="info-temp" class="data-value font-semibold"></span>
     </div>
    </div>
    <div class="mt-4 pt-3 border-t border-blue-900">
     <p id="info-fact" class="text-gray-300 text-xs italic"></p>
    </div>
   </div><!-- Educational Panel -->
   <div id="edu-panel" class="absolute top-20 left-4 z-10 educational-panel rounded-r-xl p-4 w-72 hidden">
    <h3 class="title-font text-cyan-400 font-bold mb-3 flex items-center gap-2"><span>üéì</span> ORBITAL MECHANICS</h3>
    <div class="space-y-3 text-xs">
     <div class="fact-highlight p-2 rounded">
      <p class="text-white font-semibold">Kepler's Laws</p>
      <p class="text-gray-400 mt-1">Planets orbit in ellipses with the Sun at one focus. Equal areas are swept in equal times.</p>
     </div>
     <div class="fact-highlight p-2 rounded">
      <p class="text-white font-semibold">Scale Representation</p>
      <p class="text-gray-400 mt-1">Actual distances are millions of km. This model is compressed for visualization.</p>
     </div>
     <div class="fact-highlight p-2 rounded">
      <p class="text-white font-semibold">Relative Speeds</p>
      <p class="text-gray-400 mt-1">Inner planets orbit faster than outer ones due to stronger gravitational pull.</p>
     </div>
     <div id="live-data" class="mt-3 p-2 bg-black/30 rounded">
      <p class="text-cyan-400 font-semibold mb-2">üìä Live Data</p>
      <div class="grid grid-cols-2 gap-2 text-gray-300">
       <div>
        Earth Position: <span id="earth-pos" class="text-cyan-300">0¬∞</span>
       </div>
       <div>
        Mars Position: <span id="mars-pos" class="text-cyan-300">0¬∞</span>
       </div>
      </div>
     </div>
    </div><button id="close-edu" class="mt-3 text-xs text-gray-500 hover:text-cyan-400">Close Panel</button>
   </div><!-- Educational Toggle --> <button id="edu-toggle" class="absolute top-20 left-4 z-20 control-btn rounded-lg px-4 py-2 text-white text-sm"> üéì Learn </button> <!-- Mini Map -->
   <div class="absolute bottom-4 right-4 z-20 mini-map rounded-xl p-2 w-32 h-32">
    <div class="relative w-full h-full">
     <div class="absolute left-1/2 top-1/2 w-3 h-3 -ml-1.5 -mt-1.5 rounded-full bg-yellow-500"></div>
     <div id="mini-earth" class="absolute w-2 h-2 rounded-full bg-blue-500" style="left: 50%; top: 50%;"></div>
     <div id="mini-mars" class="absolute w-2 h-2 rounded-full bg-red-500" style="left: 50%; top: 50%;"></div>
     <div id="zoom-indicator" class="zoom-indicator rounded hidden"></div>
    </div>
    <p class="text-center text-gray-500 text-xs mt-1">System View</p>
   </div><!-- Measurement Display -->
   <div id="measure-display" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 info-card rounded-xl p-4 hidden">
    <h3 class="title-font text-cyan-400 font-bold text-center mb-2">üìè Distance Measurement</h3>
    <p class="text-white text-center">Click two celestial bodies to measure distance</p>
    <p id="measure-result" class="data-value text-xl text-center mt-2 hidden"></p><button id="cancel-measure" class="mt-3 w-full control-btn rounded-lg py-2 text-white text-sm">Cancel</button>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: 'SOLAR SYSTEM EXPLORER',
      welcome_message: 'Navigate through our cosmic neighborhood',
      background_color: '#0a0a1a',
      surface_color: '#1e1e3c',
      text_color: '#e0e0ff',
      primary_action_color: '#6495ed',
      secondary_action_color: '#00ffff'
    };

    const celestialData = {
      sun: {
        name: 'The Sun',
        type: 'G-type Main-sequence Star',
        diameter: '1,392,700 km',
        distance: 'Center of System',
        period: 'N/A',
        temp: '5,500¬∞C (surface)',
        fact: 'The Sun contains 99.86% of all mass in our solar system and could fit 1.3 million Earths inside it!',
        iconClass: 'sun'
      },
      earth: {
        name: 'Earth',
        type: 'Terrestrial Planet',
        diameter: '12,742 km',
        distance: '149.6 million km (1 AU)',
        period: '365.25 days',
        temp: '15¬∞C (average)',
        fact: 'Earth is the only known planet with liquid water on its surface and the only one confirmed to harbor life.',
        iconClass: 'earth'
      },
      moon: {
        name: 'The Moon',
        type: 'Natural Satellite',
        diameter: '3,474 km',
        distance: '384,400 km from Earth',
        period: '27.3 days (around Earth)',
        temp: '-20¬∞C to 120¬∞C',
        fact: 'The Moon is slowly drifting away from Earth at about 3.8 cm per year!',
        iconClass: 'moon'
      },
      mars: {
        name: 'Mars',
        type: 'Terrestrial Planet',
        diameter: '6,779 km',
        distance: '227.9 million km (1.52 AU)',
        period: '687 days',
        temp: '-60¬∞C (average)',
        fact: 'Mars has the largest volcano in the solar system‚ÄîOlympus Mons, which is 3x taller than Mount Everest!',
        iconClass: 'mars'
      }
    };

    // Actual distances for measurement (in million km)
    const actualDistances = {
      sun: 0,
      earth: 149.6,
      moon: 149.98, // Earth + Moon distance
      mars: 227.9
    };

    let state = {
      paused: false,
      speed: 1,
      zoom: 1,
      showOrbits: true,
      measuring: false,
      measureFirst: null,
      earthAngle: 0,
      marsAngle: 0
    };

    // Generate stars
    function createStars() {
      const container = document.getElementById('stars-container');
      const starCount = 200;
      
      for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
        star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
        star.style.setProperty('--min-opacity', Math.random() * 0.3 + 0.2);
        star.style.animationDelay = Math.random() * 3 + 's';
        container.appendChild(star);
      }
    }

    function showBodyInfo(bodyKey) {
      const data = celestialData[bodyKey];
      const infoPanel = document.getElementById('body-info');
      
      document.getElementById('info-name').textContent = data.name;
      document.getElementById('info-type').textContent = data.type;
      document.getElementById('info-diameter').textContent = data.diameter;
      document.getElementById('info-distance').textContent = data.distance;
      document.getElementById('info-period').textContent = data.period;
      document.getElementById('info-temp').textContent = data.temp;
      document.getElementById('info-fact').textContent = data.fact;
      
      const icon = document.getElementById('info-icon');
      icon.className = 'w-12 h-12 rounded-full celestial-body ' + data.iconClass;
      icon.style.position = 'relative';
      icon.style.animation = 'none';
      
      infoPanel.classList.remove('hidden');
    }

    function setupEventListeners() {
      // Celestial bodies click
      document.querySelectorAll('.celestial-body').forEach(body => {
        body.addEventListener('click', (e) => {
          const bodyKey = e.target.dataset.body;
          
          if (state.measuring) {
            handleMeasurement(bodyKey);
          } else {
            showBodyInfo(bodyKey);
          }
        });
      });

      // Close info panel
      document.getElementById('close-info').addEventListener('click', () => {
        document.getElementById('body-info').classList.add('hidden');
      });

      // Speed slider
      const speedSlider = document.getElementById('speed-slider');
      speedSlider.addEventListener('input', (e) => {
        state.speed = parseFloat(e.target.value);
        document.getElementById('speed-display').textContent = state.speed.toFixed(1) + 'x';
        updateAnimationSpeeds();
      });

      // Pause button
      document.getElementById('pause-btn').addEventListener('click', (e) => {
        state.paused = !state.paused;
        e.target.textContent = state.paused ? '‚ñ∂Ô∏è Play' : '‚è∏Ô∏è Pause';
        e.target.classList.toggle('active', state.paused);
        document.getElementById('solar-system').style.animationPlayState = state.paused ? 'paused' : 'running';
        document.querySelectorAll('#earth-orbit, #mars-orbit, #moon-orbit, .celestial-body').forEach(el => {
          el.style.animationPlayState = state.paused ? 'paused' : 'running';
        });
      });

      // Reset button
      document.getElementById('reset-btn').addEventListener('click', () => {
        state.speed = 1;
        state.zoom = 1;
        state.paused = false;
        speedSlider.value = 1;
        document.getElementById('speed-display').textContent = '1.0x';
        document.getElementById('zoom-level').textContent = '100%';
        document.getElementById('pause-btn').textContent = '‚è∏Ô∏è Pause';
        document.getElementById('pause-btn').classList.remove('active');
        updateAnimationSpeeds();
        updateZoom();
        document.querySelectorAll('#earth-orbit, #mars-orbit, #moon-orbit, .celestial-body').forEach(el => {
          el.style.animationPlayState = 'running';
        });
      });

      // Measure button
      document.getElementById('measure-btn').addEventListener('click', (e) => {
        state.measuring = !state.measuring;
        e.target.classList.toggle('active', state.measuring);
        document.getElementById('measure-display').classList.toggle('hidden', !state.measuring);
        document.getElementById('measure-result').classList.add('hidden');
        state.measureFirst = null;
      });

      // Cancel measure
      document.getElementById('cancel-measure').addEventListener('click', () => {
        state.measuring = false;
        state.measureFirst = null;
        document.getElementById('measure-btn').classList.remove('active');
        document.getElementById('measure-display').classList.add('hidden');
      });

      // Orbits toggle
      document.getElementById('orbits-btn').addEventListener('click', (e) => {
        state.showOrbits = !state.showOrbits;
        e.target.classList.toggle('active', state.showOrbits);
        document.querySelectorAll('.orbit-path').forEach(path => {
          path.style.opacity = state.showOrbits ? '1' : '0';
        });
      });

      // Zoom controls
      document.getElementById('zoom-in').addEventListener('click', () => {
        state.zoom = Math.min(state.zoom + 0.25, 3);
        updateZoom();
      });

      document.getElementById('zoom-out').addEventListener('click', () => {
        state.zoom = Math.max(state.zoom - 0.25, 0.5);
        updateZoom();
      });

      // Educational panel
      document.getElementById('edu-toggle').addEventListener('click', () => {
        document.getElementById('edu-panel').classList.toggle('hidden');
        document.getElementById('edu-toggle').classList.toggle('hidden');
      });

      document.getElementById('close-edu').addEventListener('click', () => {
        document.getElementById('edu-panel').classList.add('hidden');
        document.getElementById('edu-toggle').classList.remove('hidden');
      });

      // Keyboard controls
      document.addEventListener('keydown', (e) => {
        if (e.key === ' ') {
          e.preventDefault();
          document.getElementById('pause-btn').click();
        } else if (e.key === '+' || e.key === '=') {
          document.getElementById('zoom-in').click();
        } else if (e.key === '-') {
          document.getElementById('zoom-out').click();
        }
      });
    }

    function handleMeasurement(bodyKey) {
      if (!state.measureFirst) {
        state.measureFirst = bodyKey;
        document.getElementById('measure-display').querySelector('p').textContent = 
          `Selected: ${celestialData[bodyKey].name}. Click another body.`;
      } else {
        const dist1 = actualDistances[state.measureFirst];
        const dist2 = actualDistances[bodyKey];
        const distance = Math.abs(dist2 - dist1);
        
        document.getElementById('measure-result').textContent = 
          `${celestialData[state.measureFirst].name} ‚Üî ${celestialData[bodyKey].name}: ${distance.toFixed(1)} million km`;
        document.getElementById('measure-result').classList.remove('hidden');
        state.measureFirst = null;
      }
    }

    function updateAnimationSpeeds() {
      const baseEarthPeriod = 20;
      const baseMarsPeriod = 35;
      const baseMoonPeriod = 5;
      
      document.getElementById('earth-orbit').style.animationDuration = (baseEarthPeriod / state.speed) + 's';
      document.getElementById('mars-orbit').style.animationDuration = (baseMarsPeriod / state.speed) + 's';
      document.getElementById('moon-orbit').style.animationDuration = (baseMoonPeriod / state.speed) + 's';
    }

    function updateZoom() {
      document.getElementById('solar-system').style.transform = `scale(${state.zoom})`;
      document.getElementById('zoom-level').textContent = Math.round(state.zoom * 100) + '%';
    }

    function updateMiniMap() {
      const time = Date.now() / 1000 * state.speed;
      const earthAngle = (time / 20) * 360;
      const marsAngle = (time / 35) * 360;
      
      const earthX = 50 + Math.cos(earthAngle * Math.PI / 180) * 20;
      const earthY = 50 + Math.sin(earthAngle * Math.PI / 180) * 20;
      const marsX = 50 + Math.cos(marsAngle * Math.PI / 180) * 35;
      const marsY = 50 + Math.sin(marsAngle * Math.PI / 180) * 35;
      
      document.getElementById('mini-earth').style.left = earthX + '%';
      document.getElementById('mini-earth').style.top = earthY + '%';
      document.getElementById('mini-mars').style.left = marsX + '%';
      document.getElementById('mini-mars').style.top = marsY + '%';
      
      // Update live data
      document.getElementById('earth-pos').textContent = Math.round(earthAngle % 360) + '¬∞';
      document.getElementById('mars-pos').textContent = Math.round(marsAngle % 360) + '¬∞';
      
      if (!state.paused) {
        requestAnimationFrame(updateMiniMap);
      }
    }

    function applyConfig(config) {
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('welcome-message').textContent = config.welcome_message || defaultConfig.welcome_message;
      
      // Apply colors
      document.body.style.setProperty('--bg-color', config.background_color || defaultConfig.background_color);
      document.body.style.setProperty('--surface-color', config.surface_color || defaultConfig.surface_color);
      document.body.style.setProperty('--text-color', config.text_color || defaultConfig.text_color);
      document.body.style.setProperty('--primary-color', config.primary_action_color || defaultConfig.primary_action_color);
      document.body.style.setProperty('--accent-color', config.secondary_action_color || defaultConfig.secondary_action_color);
    }

    // Initialize
    createStars();
    setupEventListeners();
    updateMiniMap();

    // SDK initialization
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          applyConfig(config);
        },
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => { config.surface_color = value; window.elementSdk.setConfig({ surface_color: value }); }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => { config.primary_action_color = value; window.elementSdk.setConfig({ primary_action_color: value }); }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => { config.secondary_action_color = value; window.elementSdk.setConfig({ secondary_action_color: value }); }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['main_title', config.main_title || defaultConfig.main_title],
          ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
        ])
      });
    } else {
      applyConfig(defaultConfig);
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c99b70a92cb597e',t:'MTc3MDM3MTEzMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
